<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Retrieves the NDTH Routing setting from Routing_Config in PrC Config Settings custom metadata</description>
        <name>Get_NDTH_Routing_Setting_from_Utils</name>
        <label>Get NDTH Routing Setting from Utils</label>
        <locationX>402</locationX>
        <locationY>1008</locationY>
        <actionName>PC_PrcConfigSettingsUtility</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>NDTH_or_Skills_Based_Routing</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <nameSegment>PC_PrcConfigSettingsUtility</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <description>Retrieves the nearest available specialist&apos;s service resource based on the running user&apos;s (FLP) service location and requested specialty on the PC Case</description>
        <name>Get_Nearest_Available_Specialist</name>
        <label>Get Nearest Available Specialist</label>
        <locationX>50</locationX>
        <locationY>1332</locationY>
        <actionName>PC_LocationBasedRoutingFlow</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Route_case_to_specialist</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>skillName</name>
            <value>
                <elementReference>$Record.Specialty__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>userid</name>
            <value>
                <elementReference>$Record.CreatedById</elementReference>
            </value>
        </inputParameters>
        <nameSegment>PC_LocationBasedRoutingFlow</nameSegment>
        <offset>0</offset>
        <outputParameters>
            <assignToReference>UserId</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Route_case_to_specialist</name>
        <label>Route case to specialist</label>
        <locationX>50</locationX>
        <locationY>1440</locationY>
        <actionName>routeWork</actionName>
        <actionType>routeWork</actionType>
        <connector>
            <targetReference>Get_pc_availability_record</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelId</name>
            <value>
                <stringValue>0N93d0000000098CAA</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelLabel</name>
            <value>
                <stringValue>Provider Connect Chat Service</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelDevName</name>
            <value>
                <stringValue>PC_Chat_Service</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingType</name>
            <value>
                <stringValue>Agent</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingConfigId</name>
            <value>
                <elementReference>Channel_based_routing_config</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>queueId</name>
        </inputParameters>
        <inputParameters>
            <name>agentId</name>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>agentLabel</name>
        </inputParameters>
        <inputParameters>
            <name>isAgentRequired</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>queueLabel</name>
        </inputParameters>
        <inputParameters>
            <name>skillOption</name>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
        </inputParameters>
        <inputParameters>
            <name>isAgentVariable</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>botId</name>
        </inputParameters>
        <inputParameters>
            <name>botLabel</name>
        </inputParameters>
        <inputParameters>
            <name>isQueueVariable</name>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>isRoutingConfigVariable</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>routeWork</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <description>Routes skills based config to specialist</description>
        <name>Route_case_to_specialist_skills_based</name>
        <label>Route case to specialist</label>
        <locationX>490</locationX>
        <locationY>1956</locationY>
        <actionName>routeWork</actionName>
        <actionType>routeWork</actionType>
        <connector>
            <targetReference>Get_pc_availability_record</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelId</name>
            <value>
                <stringValue>0N93d0000000098CAA</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelLabel</name>
            <value>
                <stringValue>Provider Connect Chat Service</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>serviceChannelDevName</name>
            <value>
                <stringValue>PC_Chat_Service</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingType</name>
            <value>
                <stringValue>SkillsBased</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>routingConfigId</name>
            <value>
                <elementReference>Channel_based_routing_config</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>queueId</name>
        </inputParameters>
        <inputParameters>
            <name>agentId</name>
        </inputParameters>
        <inputParameters>
            <name>agentLabel</name>
        </inputParameters>
        <inputParameters>
            <name>isAgentRequired</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>queueLabel</name>
        </inputParameters>
        <inputParameters>
            <name>skillOption</name>
            <value>
                <stringValue>DefineSkillRequirements</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skillRequirementsResourceItem</name>
            <value>
                <elementReference>skillList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>isAgentVariable</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>botId</name>
        </inputParameters>
        <inputParameters>
            <name>botLabel</name>
        </inputParameters>
        <inputParameters>
            <name>isQueueVariable</name>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>isRoutingConfigVariable</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>routeWork</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <description>Sends a notification to the record owner.</description>
        <name>Send_notification_to_specialist</name>
        <label>Send notification to specialist</label>
        <locationX>3130</locationX>
        <locationY>600</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_PC_Reminder_Notification.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>Close_case_reminder_body</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <elementReference>Close_case_reminder_title</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>OwnerID</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Add_record_to_collection</name>
        <label>Add record to collection</label>
        <locationX>2426</locationX>
        <locationY>1440</locationY>
        <assignmentItems>
            <assignToReference>Chat_session_update_collection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Chat_Session_Update_Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_sessions_to_closed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Add req record to collection</description>
        <name>Add_req_record_to_collection</name>
        <label>Add req record to collection</label>
        <locationX>710</locationX>
        <locationY>1656</locationY>
        <assignmentItems>
            <assignToReference>skillList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>SkillRequirementRecord</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Skill_req_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Add skills to the collection variable for iteration in the Skill requirement loop</description>
        <name>Add_Skill_Results_to_Loop_Collection_2</name>
        <label>Add Skill Results to Loop Collection</label>
        <locationX>622</locationX>
        <locationY>1332</locationY>
        <assignmentItems>
            <assignToReference>getSkillsQueryResults</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Skills</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Skill_req_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Closed_Values_0_0</name>
        <label>Assign Closed Values</label>
        <locationX>2426</locationX>
        <locationY>1332</locationY>
        <assignmentItems>
            <assignToReference>Chat_Session_Update_Record.PC_Is_Closed__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Chat_Session_Update_Record.PC_Closed_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Chat_Session_Update_Record.PC_Closed_By__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Chat_Session_Update_Record.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Set_sessions_to_closed.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_record_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns the user ID of the record owner to a collection variable.</description>
        <name>Assign_owner_ID</name>
        <label>Assign owner ID</label>
        <locationX>3130</locationX>
        <locationY>492</locationY>
        <assignmentItems>
            <assignToReference>OwnerID</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Owner:User.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_notification_to_specialist</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Values_to_PT</name>
        <label>Assign Values to PT</label>
        <locationX>402</locationX>
        <locationY>492</locationY>
        <assignmentItems>
            <assignToReference>pushTopic.Query</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>pushTopicQuery</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>pushTopic.NotifyForOperationUndelete</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>pushTopic.NotifyForOperationDelete</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>pushTopic.ApiVersion</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>56.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>pushTopic.NotifyForFields</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Referenced</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>pushTopic.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>chatSessionId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_PushTopic</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Generates the skill requirement record</description>
        <name>Generate_skill_requirement_record</name>
        <label>Generate skill requirement record</label>
        <locationX>710</locationX>
        <locationY>1548</locationY>
        <assignmentItems>
            <assignToReference>SkillRequirementRecord.SkillLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SkillRequirementRecord.IsAdditionalSkill</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SkillRequirementRecord.SkillLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SkillRequirementRecord.SkillId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Skill_req_loop.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_req_record_to_collection</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Availability_record_found</name>
        <label>Availability record found?</label>
        <locationX>2470</locationX>
        <locationY>600</locationY>
        <defaultConnector>
            <targetReference>Set_closed_date_time</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Record not found</defaultConnectorLabel>
        <rules>
            <name>Record_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_availability_record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_capacity</targetReference>
            </connector>
            <label>Record found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Case_assigned</name>
        <label>Case assigned?</label>
        <locationX>1524</locationX>
        <locationY>600</locationY>
        <defaultConnectorLabel>Case is not assigned</defaultConnectorLabel>
        <rules>
            <name>Case_is_assigned</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Case_is_assigned__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_new_share_with_creator</targetReference>
            </connector>
            <label>Case is assigned</label>
        </rules>
    </decisions>
    <decisions>
        <name>Chat_session_found</name>
        <label>Chat session found?</label>
        <locationX>2470</locationX>
        <locationY>1116</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Chat_session_was_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Chat_Session</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_sessions_to_closed</targetReference>
            </connector>
            <label>Chat session was found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_disable_trigger_flag_0</name>
        <label>Criteria check</label>
        <locationX>3262</locationX>
        <locationY>276</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>User_does_not_have_disable_trigger_flag_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Permission.DisableTriggersFlag</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Open</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedById</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.OwnerId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_PC_Reminder_Notification</targetReference>
            </connector>
            <label>Criteria met</label>
        </rules>
    </decisions>
    <decisions>
        <description>Skips this problem section if a deployment user is running a test. This is a known Salesforce issue.</description>
        <name>Copy_2_of_is_Deployment_User_Running_Test</name>
        <label>Deployment User Running Test?</label>
        <locationX>622</locationX>
        <locationY>1848</locationY>
        <defaultConnector>
            <targetReference>Get_pc_availability_record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes Deployment User</defaultConnectorLabel>
        <rules>
            <name>Not_Deployment_User</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.isRunningTest_DO_NOT_USE__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Route_case_to_specialist_skills_based</targetReference>
            </connector>
            <label>Not Deployment User</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Case_Closed</name>
        <label>Is Case Closed</label>
        <locationX>2668</locationX>
        <locationY>384</locationY>
        <defaultConnectorLabel>Is Open</defaultConnectorLabel>
        <rules>
            <name>Is_Closed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Open</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Pending Note</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_availability_record</targetReference>
            </connector>
            <label>Case closed and assigned</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if case is new using formula resource.</description>
        <name>Is_case_new</name>
        <label>Is case new?</label>
        <locationX>1524</locationX>
        <locationY>276</locationY>
        <defaultConnector>
            <targetReference>Is_Case_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Existing Case</defaultConnectorLabel>
        <rules>
            <name>New_case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Check_if_case_is_new</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_chat_session</targetReference>
            </connector>
            <label>New case</label>
        </rules>
        <rules>
            <name>Did_specialist_change</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Assigned_Specialist__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_specialist_service_resource</targetReference>
            </connector>
            <label>Did specialist change?</label>
        </rules>
        <rules>
            <name>Did_owner_change</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Specialist__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Get_specialist_service_resource</targetReference>
            </connector>
            <label>Did owner change?</label>
        </rules>
        <rules>
            <name>Channel_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Change_Channel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Channel changed</label>
        </rules>
    </decisions>
    <decisions>
        <description>Skips this problem section if a deployment user is running a test. This is a known Salesforce issue.</description>
        <name>is_Deployment_User_Running_Test</name>
        <label>is Deployment User Running Test?</label>
        <locationX>182</locationX>
        <locationY>1224</locationY>
        <defaultConnector>
            <targetReference>Get_pc_availability_record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes - Deployment User</defaultConnectorLabel>
        <rules>
            <name>no</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.isRunningTest_DO_NOT_USE__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Nearest_Available_Specialist</targetReference>
            </connector>
            <label>no</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if the routing is NDTH based or Location Based</description>
        <name>NDTH_or_Skills_Based_Routing</name>
        <label>NDTH or Skills-Based Routing?</label>
        <locationX>402</locationX>
        <locationY>1116</locationY>
        <defaultConnector>
            <targetReference>Get_Skills</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Skills Based Routing</defaultConnectorLabel>
        <rules>
            <name>NDTH_Based_Routing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NDTH_Routing_Setting_from_Utils.ndthRoutingEnabledValue</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PC_General_Question__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>is_Deployment_User_Running_Test</targetReference>
            </connector>
            <label>NDTH Based Routing</label>
        </rules>
    </decisions>
    <decisions>
        <name>PC_availability_record_found</name>
        <label>PC availability record found?</label>
        <locationX>402</locationX>
        <locationY>2340</locationY>
        <defaultConnectorLabel>Record was not found</defaultConnectorLabel>
        <rules>
            <name>Record_was_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_pc_availability_record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_to_capacity</targetReference>
            </connector>
            <label>Record was found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Routing_configuration</name>
        <label>Routing configuration</label>
        <locationX>402</locationX>
        <locationY>708</locationY>
        <defaultConnector>
            <targetReference>Get_routing_config_Teams_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Teams</defaultConnectorLabel>
        <rules>
            <name>Chat</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Channel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Chat</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_routing_config_Chat</targetReference>
            </connector>
            <label>Chat</label>
        </rules>
        <rules>
            <name>Phone</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Channel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Phone</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_routing_config_Phone</targetReference>
            </connector>
            <label>Phone</label>
        </rules>
    </decisions>
    <decisions>
        <name>Teams_case</name>
        <label>Teams case?</label>
        <locationX>1326</locationX>
        <locationY>816</locationY>
        <defaultConnectorLabel>Case is not a teams case</defaultConnectorLabel>
        <rules>
            <name>Case_is_a_teams_case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Channel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Teams</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_pc_chat_session</targetReference>
            </connector>
            <label>Case is a teams case</label>
        </rules>
    </decisions>
    <description>Routes newly created cases to specialists based on skills. Sends notification to specialists reminding them to close cases if they are left on open for more than 20 minutes after they were last modified.</description>
    <environments>Default</environments>
    <formulas>
        <name>AddReqCount</name>
        <dataType>Number</dataType>
        <expression>{!ReqLoopCount} + 1</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>AddToCapacity</name>
        <dataType>Number</dataType>
        <expression>IF({!Get_pc_availability_record.Capacity_Rolling_Sum__c} &lt; 0, 0, {!Get_pc_availability_record.Capacity_Rolling_Sum__c}) + (IF(ISPICKVAL({!$Record.Channel__c} , &apos;Teams&apos;),20,
IF(ISPICKVAL({!$Record.Channel__c},&apos;Phone&apos;), 10, 5
)))</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>Channel_based_routing_config</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!$Record.Channel__c},&quot;Chat&quot;),{!Get_routing_config_Chat.Id},
IF(ISPICKVAL({!$Record.Channel__c},&quot;Phone&quot;),{!Get_routing_config_Phone.Id},
IF(ISPICKVAL({!$Record.Channel__c},&quot;Teams&quot;),{!Get_routing_config_Teams_0.Id},null)))</expression>
    </formulas>
    <formulas>
        <name>ChannelVar</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!$Record.Channel__c},&quot;Chat&quot;),&quot;Chat&quot;,
IF(ISPICKVAL({!$Record.Channel__c},&quot;Teams&quot;),&quot;Teams&quot;,
&quot;Phone&quot;))</expression>
    </formulas>
    <formulas>
        <description>Checks whether or not the triggering record is new, returns true or false.</description>
        <name>Check_if_case_is_new</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>GenSkillReqID</name>
        <dataType>String</dataType>
        <expression>&quot;ID&quot; &amp; RIGHT({!$Record.Id},5) &amp; TEXT({!ReqLoopCount})</expression>
    </formulas>
    <formulas>
        <name>pushTopicQuery</name>
        <dataType>String</dataType>
        <expression>&quot;SELECT Id, Body__c, PC_Chat_Session__c, CreatedById, isClosed__c, ChatSentById__c, ChatSentByFullName__c, hasSpecialistEnteredChat__c, closedDate__c, closedBy__c, LastModifiedDate, Random_Gen__c, PC_Related_Chatter_Id__c FROM PC_Chat_Push_Event__c WHERE PC_Chat_Session__c = &apos;&quot; &amp; {!chatSessionId} &amp; &quot;&apos;&quot;</expression>
    </formulas>
    <formulas>
        <name>SubtractCapacitySum</name>
        <dataType>Number</dataType>
        <expression>IF({!Get_availability_record.Capacity_Rolling_Sum__c} &lt;= 0, 0,
{!Get_availability_record.Capacity_Rolling_Sum__c}  - (IF(ISPICKVAL({!$Record.Channel__c} , &apos;Teams&apos;),20,
IF(ISPICKVAL({!$Record.Channel__c},&apos;Phone&apos;), 10, 5
))))</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>PC Specialist {!$Flow.CurrentDateTime}</interviewLabel>
    <label>PC Case routing and notifications</label>
    <loops>
        <name>Set_sessions_to_closed</name>
        <label>Set sessions to closed</label>
        <locationX>2338</locationX>
        <locationY>1224</locationY>
        <collectionReference>Get_Chat_Session</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Closed_Values_0_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Chat_Session</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loops over skills</description>
        <name>Skill_req_loop</name>
        <label>Skill req loop</label>
        <locationX>622</locationX>
        <locationY>1440</locationY>
        <collectionReference>getSkillsQueryResults</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Generate_skill_requirement_record</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Copy_2_of_is_Deployment_User_Running_Test</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_chat_session</name>
        <label>Create chat session</label>
        <locationX>402</locationX>
        <locationY>384</locationY>
        <assignRecordIdToReference>chatSessionId</assignRecordIdToReference>
        <connector>
            <targetReference>Assign_Values_to_PT</targetReference>
        </connector>
        <inputAssignments>
            <field>Provider_Connect_Case__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>PC_Chat_Session__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_new_share_with_creator</name>
        <label>Create new share with creator</label>
        <locationX>1326</locationX>
        <locationY>708</locationY>
        <connector>
            <targetReference>Teams_case</targetReference>
        </connector>
        <inputAssignments>
            <field>AccessLevel</field>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RowCause</field>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>UserOrGroupId</field>
            <value>
                <elementReference>$Record.CreatedById</elementReference>
            </value>
        </inputAssignments>
        <object>PC_Case__Share</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_PCP_teams_link</name>
        <label>Create PCP teams link</label>
        <locationX>1194</locationX>
        <locationY>1032</locationY>
        <inputAssignments>
            <field>Body</field>
            <value>
                <elementReference>providerTeamsLinkMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IsRichText</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>Get_pc_chat_session.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>TextPost</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Visibility</field>
            <value>
                <stringValue>InternalUsers</stringValue>
            </value>
        </inputAssignments>
        <object>FeedItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_PushTopic</name>
        <label>Create PushTopic</label>
        <locationX>402</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Routing_configuration</targetReference>
        </connector>
        <inputReference>pushTopic</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Copy_1_of_Get_specialist_service_resource</name>
        <label>Copy 1 of Get specialist service resource</label>
        <locationX>1524</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Set_specialist_to_owner</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_availability_record</name>
        <label>Get availability record</label>
        <locationX>2470</locationX>
        <locationY>492</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Availability_record_found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Medical_Specialty__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Specialty__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Record_Type_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Live_Record</stringValue>
            </value>
        </filters>
        <filters>
            <field>Capacity_Rolling_Sum__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PC_Availability__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Chat_Session</name>
        <label>Get Chat Session</label>
        <locationX>2470</locationX>
        <locationY>1008</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Chat_session_found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Provider_Connect_Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PC_Chat_Session__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_pc_availability_record</name>
        <label>Get pc availability record</label>
        <locationX>402</locationX>
        <locationY>2232</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>PC_availability_record_found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Medical_Specialty__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Specialty__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Record_Type_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Live_Record</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PC_Availability__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_pc_chat_session</name>
        <label>Get pc chat session</label>
        <locationX>1194</locationX>
        <locationY>924</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_PCP_teams_link</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Provider_Connect_Case__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PC_Chat_Session__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Retrieves the PC_Close_Case_Reminder notification.</description>
        <name>Get_PC_Reminder_Notification</name>
        <label>Get PC Reminder Notification</label>
        <locationX>3130</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_owner_ID</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PC_Close_Case_Reminder</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CustomNotificationType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_routing_config_Chat</name>
        <label>Get routing config - Chat</label>
        <locationX>138</locationX>
        <locationY>816</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NDTH_Routing_Setting_from_Utils</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PC_Provider_Connect_Chat</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>QueueRoutingConfig</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_routing_config_Phone</name>
        <label>Get routing config - Phone</label>
        <locationX>402</locationX>
        <locationY>816</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NDTH_Routing_Setting_from_Utils</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PC_Provider_Connect_Phone</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>QueueRoutingConfig</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_routing_config_Teams_0</name>
        <label>Get routing config - Teams</label>
        <locationX>666</locationX>
        <locationY>816</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NDTH_Routing_Setting_from_Utils</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PC_Provider_Connect_Teams</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>QueueRoutingConfig</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets the Available Skills</description>
        <name>Get_Skills</name>
        <label>Get Skills</label>
        <locationX>622</locationX>
        <locationY>1224</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_Skill_Results_to_Loop_Collection_2</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>MasterLabel</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Specialty__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>MasterLabel</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ChannelVar</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Skill</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_specialist_service_resource</name>
        <label>Get specialist service resource</label>
        <locationX>930</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_Set_owner_to_specialist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Add_to_capacity</name>
        <label>Add to capacity</label>
        <locationX>270</locationX>
        <locationY>2448</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_pc_availability_record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Capacity_Rolling_Sum__c</field>
            <value>
                <elementReference>AddToCapacity</elementReference>
            </value>
        </inputAssignments>
        <object>PC_Availability__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Copy_1_of_Set_owner_to_specialist</name>
        <label>Set owner to specialist</label>
        <locationX>930</locationX>
        <locationY>492</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OwnerId</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.Assigned_Specialist__r.RelatedRecordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.Assigned_Specialist__r.RelatedRecordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Specialist__c</field>
            <value>
                <elementReference>$Record.Assigned_Specialist__r.RelatedRecordId</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_closed_date_time</name>
        <label>Set closed date/time</label>
        <locationX>2470</locationX>
        <locationY>900</locationY>
        <connector>
            <targetReference>Get_Chat_Session</targetReference>
        </connector>
        <inputAssignments>
            <field>Closed_Date__c</field>
            <value>
                <elementReference>$Record.LastModifiedDate</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_specialist_to_owner</name>
        <label>Set specialist to owner</label>
        <locationX>1524</locationX>
        <locationY>492</locationY>
        <connector>
            <targetReference>Case_assigned</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Specialist__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Assigned_Specialist__c</field>
            <value>
                <elementReference>Copy_1_of_Get_specialist_service_resource.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Owner_changed__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Specialist__c</field>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_capacity</name>
        <label>Update capacity</label>
        <locationX>2338</locationX>
        <locationY>708</locationY>
        <connector>
            <targetReference>Set_closed_date_time</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_availability_record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Capacity_Rolling_Sum__c</field>
            <value>
                <elementReference>SubtractCapacitySum</elementReference>
            </value>
        </inputAssignments>
        <object>PC_Availability__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Chat_Session</name>
        <label>Update Chat Session</label>
        <locationX>2338</locationX>
        <locationY>1632</locationY>
        <inputReference>Chat_session_update_collection</inputReference>
    </recordUpdates>
    <start>
        <locationX>2267</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Is_case_new</targetReference>
        </connector>
        <filterFormula>{!$Permission.DisableTriggersFlag} = FALSE</filterFormula>
        <object>PC_Case__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <scheduledPaths>
            <name>Check_for_case_closed</name>
            <connector>
                <targetReference>Check_for_disable_trigger_flag_0</targetReference>
            </connector>
            <label>Check for case closed</label>
            <offsetNumber>20</offsetNumber>
            <offsetUnit>Minutes</offsetUnit>
            <recordField>LastModifiedDate</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <description>Body for PC_Close_Case_Reminder notification</description>
        <name>Close_case_reminder_body</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Case number {!$Record.Name} is still open. If this case is completed, please mark it as closed.</text>
    </textTemplates>
    <textTemplates>
        <description>Subject line for PC_Close_Case_Reminder notification</description>
        <name>Close_case_reminder_title</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>One of your cases is still open</text>
    </textTemplates>
    <textTemplates>
        <name>New_case_body</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>You have a new {!$Record.Channel__c} - {!$Record.Specialty__c} case.</text>
    </textTemplates>
    <textTemplates>
        <name>New_case_title</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>You have a new case</text>
    </textTemplates>
    <textTemplates>
        <name>providerTeamsLinkMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;a href=&quot;https://teams.microsoft.com/l/call/0/0?users={!$Record.CreatedBy.Email}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;Click here to start a Teams call with {!$Record.CreatedBy.FirstName} {!$Record.CreatedBy.LastName}.&lt;/a&gt;&lt;/p&gt;</text>
    </textTemplates>
    <triggerOrder>1</triggerOrder>
    <variables>
        <name>Chat_session_update_collection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>PC_Chat_Session__c</objectType>
    </variables>
    <variables>
        <name>Chat_Session_Update_Record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>PC_Chat_Session__c</objectType>
    </variables>
    <variables>
        <name>chatSessionId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>currentItemFromSourceCollection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PrC_Config_Settings__mdt</objectType>
    </variables>
    <variables>
        <description>Collection that holds the list of skills retrieved by the get skills elements for use in the skill requirement loop</description>
        <name>getSkillsQueryResults</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Skill</objectType>
    </variables>
    <variables>
        <description>Stores the owner ID of the triggering record.</description>
        <name>OwnerID</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>pushTopic</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>PushTopic</objectType>
    </variables>
    <variables>
        <name>ReqLoopCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>skillList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>SkillRequirement</objectType>
    </variables>
    <variables>
        <name>SkillReqList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SkillRequirementRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SkillRequirement</objectType>
    </variables>
    <variables>
        <description>The User Id returned from the Get Nearest Service Resource action.</description>
        <name>UserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
