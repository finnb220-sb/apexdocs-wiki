<!-- sldsValidatorIgnore -->
<template>
    <!-- Nebula Logger -->
    <c-logger></c-logger>

    <!-- Global Spinner -->
    <template if:true={isLoading}>
        <lightning-spinner variant="brand" size="large"> </lightning-spinner>
    </template>

    <!-- modal window -->
    <template if:false={isLoading}>
        <section
            role="dialog"
            tabindex="-1"
            aria-label="modal-heading"
            aria-modal="true"
            aria-describedby="modal-content-id-1">
            <!-- modal header -->
            <div>
                <lightning-button-icon
                    icon-name="utility:close"
                    size="medium"
                    alternative-text="Indicates close"
                    onclick={handleClose}
                    title="Close"
                    class="slds-var-m-around_xx-small slds-float_right"
                    label="Close"
                    variant="bare-inverse">
                </lightning-button-icon>
            </div>
            <header
                class="slds-modal__header headerBackground"
                style="text-align: center; color: white; font-size: 14px; background-color: darkred">
                <h2
                    id="modal-heading-01"
                    class="slds-text-heading_medium slds-hyphenate slds-text-color_inverse"
                    tabindex="0">
                    e911
                </h2>
            </header>
            <!-- modal body -->
            <div class="slds-modal__content slds-p-horizontal_x-large slds-p-vertical_medium" id="modal-content-id-1">
                <div class="slds-align_center">
                    <template lwc:if={isLoggedInBucherSuter}>
                        <lightning-formatted-text
                            tabindex="0"
                            class="slds-form-element__label slds-col slds-text-heading_small slds-align_center importantMessage"
                            value='IMPORTANT: Click the "Call ECRC" button to contact a 911 relay agent'></lightning-formatted-text>
                    </template>
                    <template lwc:else>
                        <lightning-formatted-text
                            tabindex="0"
                            class="slds-form-element__label slds-col slds-text-heading_small slds-align_center importantMessage"
                            value="IMPORTANT: Dial the following ECRC number since you are not signed into softphone."></lightning-formatted-text>
                    </template>
                </div>
                <div class="slds-align_left">
                    <lightning-formatted-text
                        tabindex="0"
                        class="slds-form-element__label slds-col slds-text-heading_small slds-align_left slds-text-title_bold"
                        value="ECRC">
                    </lightning-formatted-text>
                    <lightning-formatted-text
                        tabindex="0"
                        class="slds-form-element__label slds-col slds-text-body_regular slds-p-top_medium slds-p-bottom_small"
                        value="267-908-6605"></lightning-formatted-text>
                    <button
                        class="slds-button slds-button_neutral slds-p-left-large"
                        onclick={callECRC}
                        disabled={ecrcButtondisabled}>
                        Call ECRC
                    </button>
                </div>
                <lightning-formatted-text
                    tabindex="0"
                    class="slds-form-element__label slds-col slds-text-body_regular slds-p-top_medium slds-p-bottom_small"
                    value="Please use the Emergency Call Relay Center (ECRC) to speak to a 911 relay agent. The relay agent will contact the 911 services at the patient's location. There is no valid e911 address."></lightning-formatted-text>
                <div class="slds-align_left slds-text-heading_medium slds-text-title_bold">
                    <lightning-formatted-text
                        tabindex="0"
                        class="slds-form-element__label slds-col slds-text-heading_small slds-align_left"
                        value="Patient Current Location">
                    </lightning-formatted-text>
                </div>
                <lightning-formatted-text
                    tabindex="0"
                    class="slds-form-element__label slds-col slds-text-body_regular slds-p-top_medium slds-p-bottom_small"
                    value={nonAddress}></lightning-formatted-text>
            </div>

            <!-- modal footer -->
            <footer class="slds-modal__footer">
                <button class="slds-button slds-button_neutral" onclick={handleDone}>Close</button>
                <button class="slds-button slds-button_brand" onclick={handleDone}>Change Location</button>
            </footer>
            <!--</div> for the modal-->
        </section>
    </template>
</template>
